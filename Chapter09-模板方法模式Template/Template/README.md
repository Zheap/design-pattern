# 模板方法模式Template Pattern

## 模板方法的定义

模板方法定义了一个算法的步骤，并允许子类为一个或多个步骤提供实现

**在一个方法中定义一个算法的骨架，而将一些步骤延迟到子类中。模板方法使得子类可以在不改变算法结构的情况下，重新定义算法中的步骤。**

## 模板方法带来什么好处？

以书上咖啡因饮料为例，模板方法会导致如下好处：

1. 由CaffeineBeverage类主导一切，它拥有算法，并保护这个算法prepareRecipe()
2. 对子类来说，CaffeineBeverage类的存在，可以将代码的复用最大化
3. 算法只存在一个地方，所以容易修改
4. 这个模板方法提供了一个框架，可以让其他的咖啡因饮料加进来，新的咖啡因饮料只需要实现自己的方法即可
5. CaffeineBeverage类专注在算法本身，而由子类提供完整的实现

## 钩子函数hook()

钩子是一种被声明在抽象类中的方法，但是只有空的实现或者默认实现。**钩子函数本身也是虚函数，这样才能利用C++的多态特性**

钩子的存在，可以让子类由能力对算法的不同点进行挂钩。

要不要挂钩，由子类自行决定，即子类重写钩子函数。

## 好莱坞原则

别调用（打电话给）我们，我们会调用（打电话给）你

在好莱坞原则下，我们允许底层组件将自己挂钩到系统上，但是高层组件会决定什么时候和怎样使用这些底层组件。换句话说，高层组件对待底层组件的方式是：别调用我们，我们会调用你。

## 模板方法模式与策略模式

策略模式与模板方法模式都封装算法，一个用组合，一个用继承